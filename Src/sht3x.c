/*    $$$$$$\   $$$$$$\  $$\         $$$$$$\  $$$$$$$\   $$$$$$\   $$\    $$\ $$\   $$\  $$$$$$\  
*    $$  __$$\ $$  __$$\ $$ |       $$  __$$\ $$  __$$\ $$  __$$\  $$ |   $$ |$$ |  $$ |$$  __$$\ 
*    $$ /  \__|$$ /  $$ |$$ |       $$ /  $$ |$$ |  $$ |$$ /  \__| $$ |   $$ |\$$\ $$  |$$ /  \__|
*    \$$$$$$\  $$ |  $$ |$$ |       $$$$$$$$ |$$$$$$$  |\$$$$$$\   \$$\  $$  | \$$$$  / $$ |      
*     \____$$\ $$ |  $$ |$$ |       $$  __$$ |$$  __$$<  \____$$\   \$$\$$  /  $$  $$<  $$ |      
*    $$\   $$ |$$ |  $$ |$$ |       $$ |  $$ |$$ |  $$ |$$\   $$ |   \$$$  /  $$  /\$$\ $$ |  $$\ 
*    \$$$$$$  | $$$$$$  |$$$$$$$$\  $$ |  $$ |$$ |  $$ |\$$$$$$  |    \$  /   $$ /  $$ |\$$$$$$  |
*     \______/  \______/ \________| \__|  \__|\__|  \__| \______/      \_/    \__|  \__| \______/ 
*/
#include "sht3x.h"


void SHT3X_init(void)
{
    i2c3_send_command(SHT3X_ADDR,SHT3X_SOFT_RST);
}

void SHT3X_getData(SHT3x_data_t *raw_data)
{
    uint8_t buffer[6];

    i2c3_send_command(SHT3X_ADDR,SHT3X_MEAS_HIGH);
    delay_ms(20);
    i2c3_read_burst_byte(SHT3X_ADDR,6,(char *)buffer);

    raw_data->temperature = (uint16_t) ((buffer[0]<<8) | buffer[1]);
    raw_data->humidity    = (uint16_t) ((buffer[3]<<8) | buffer[4]);
}


